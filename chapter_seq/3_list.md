# Список (list)



## Изменяемый объект в виде значения по умолчанию

Мы хотим в функцию передать список. Если список не задали, создать пустой список.

```python
def func(x = 0, a = []):
    a.append(x)
    print(a)
```

**Не пишите изменяемые объекты в значения по умолчанию.**

Почему x = 0 - хорошо, a = \[\] - плохо?

Потому что эти объекты создаются 1 раз за все время работы программы перед первым вызовом функции.

(Для знающих языки С, С++ или Java - это static объекты).

Каждый новый вызов функции может изменить этот объект.

```python
>>> def foo(x = 0, a = []):
...     a.append(x)
...     print(a)
...
>>> foo(3, [5, 7, 11])  # ок, пока не используем значение по умолчанию
[5, 7, 11, 3]
>>> foo(-4, [1, 2])
[1, 2, -4]

>>> foo(1)              # в список по умолчанию добавили 1 - ок
[1]
>>> foo(5)              # в ТОТ ЖЕ список по умолчанию (он уже [1], а не []), добавили 5
[1, 5]
```

Что делать? Как исправить?

**Значениями по умолчанию делайте только неизменяемые объекты.**

```python
>>> def foo2(x = 0, a = None):
...     b = a or []
...     b.append(x)
...     print(b)
...
>>> foo2(1)
[1]
>>> foo2(5)
[5]
```

`None` - неизменяемый объект.

`a or \[\]` работает так:
* если а - непустой список, то он в выражении будет True и выражение с or дальше вычисляться не будет, значение `a or \[\]` равно `a`.
* если `a` это `None`, то `None` в логическом выражении будет False и выражение будет выполняться дальше, значение `a or \[\]` равно `\[\]`